<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>One True Path</title>
        <link href="0.css" rel="stylesheet">
    </head>
    <body>
        <main>
            <article>


                <h1>Some Thoughts About Primitive Datatypes</h1>


                <p>
                    If you're defining a method in an object-oriented language, then you need to choose parameter types and a return type.
                    One possible choice (and a very popular choice, I should add) is the string type for the relevant language.
                    This is almost always a terrible choice.
                </p> <p>
                    The first problem is the lack of value constraints.
                    A method signature is a contract, and the types within that signature encode the preconditions and postconditions for that contract.
                    If you use the string type to specify a precondition, then you're obligated to establish the postconditions in the contract, regardless of what value you actually receive.
                    If someone takes a 16 MiB video file, parses it as UTF-32 encoded text, and gives you the resulting string... Well, that's your problem now.
                </p> <p>
                    The second problem is the lack of semantic constraints.
                    If you're implementing a guidance system for a missile, and you use primitive integer types for target latitude, target longitude, and speed, then you're going to have a bad time.
                    How many lines of code can you write without giving a (latitude, longitude) pair to a method that expects a (longitude, latitude) pair?
                    How many lines of code can you write without giving a speed in kilometers per hour to a method that expects a speed in meters per second?
                </p> <p>
                    Of course, that second problem isn't just a problem with strings; the first example that came to mind didn't even involve strings.
                    Likewise, the first problem often exists for other primitive datatypes.
                    But strings are worse than other primitive datatypes, because the set of possible values is infinite and the set of reasonable interpretations is unbounded.
                </p> <p>
                    The lesson, I think, is that you should be deeply suspicious of any primitive datatype that appears in a method signature.
                    This is especially true for the internal boundaries of an application, where everything should already be parsed and validated.
                    It is somewhat less true at the external boundary, where you parse and validate untrusted values to instantiate more meaningful datatypes.
                </p>


            </article>
        </main>
    </body>
</html>
