<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>An Encoding Scheme For 2048 Bit Integers</title>
        <link href="0.css" rel="stylesheet">
    </head>
    <body>
        <main>
            <article>


                <h1>An Encoding Scheme For 2048 Bit Integers</h1>


                <h2>Overview</h2>


                <figure>
                    <div>
                        <table>
                            <tr> <th>Number of Bytes</th> <th>Number of Data Bits</th> <th>First Value</th> <th>Last Value</th> <th>1st Byte</th> <th>2nd Byte</th> <th>All Other Bytes</th> </tr>
                            <tr> <td>1</td>               <td>0</td>                   <td>0</td>           <td>0</td>          <td>00000000</td> <td>N/A</td>      <td>N/A</td>             </tr>
                            <tr> <td>---</td>             <td>---</td>                 <td>---</td>         <td>---</td>        <td>---</td>      <td>---</td>      <td>---</td>             </tr>
                            <tr> <td>0+2</td>             <td>(0*8)+0</td>             <td>2^0</td>         <td>2^1-1</td>      <td>00000001</td> <td>00000000</td> <td>N/A</td>             </tr>
                            <tr> <td>0+2</td>             <td>(0*8)+1</td>             <td>2^1</td>         <td>2^2-1</td>      <td>0000001x</td> <td>00000000</td> <td>N/A</td>             </tr>
                            <tr> <td>0+2</td>             <td>(0*8)+2</td>             <td>2^2</td>         <td>2^3-1</td>      <td>000001xx</td> <td>00000000</td> <td>N/A</td>             </tr>
                            <tr> <td>0+2</td>             <td>(0*8)+3</td>             <td>2^3</td>         <td>2^4-1</td>      <td>00001xxx</td> <td>00000000</td> <td>N/A</td>             </tr>
                            <tr> <td>0+2</td>             <td>(0*8)+4</td>             <td>2^4</td>         <td>2^5-1</td>      <td>0001xxxx</td> <td>00000000</td> <td>N/A</td>             </tr>
                            <tr> <td>0+2</td>             <td>(0*8)+5</td>             <td>2^5</td>         <td>2^6-1</td>      <td>001xxxxx</td> <td>00000000</td> <td>N/A</td>             </tr>
                            <tr> <td>0+2</td>             <td>(0*8)+6</td>             <td>2^6</td>         <td>2^7-1</td>      <td>01xxxxxx</td> <td>00000000</td> <td>N/A</td>             </tr>
                            <tr> <td>0+2</td>             <td>(0*8)+7</td>             <td>2^7</td>         <td>2^8-1</td>      <td>1xxxxxxx</td> <td>00000000</td> <td>N/A</td>             </tr>
                            <tr> <td>---</td>             <td>---</td>                 <td>---</td>         <td>---</td>        <td>---</td>      <td>---</td>      <td>---</td>             </tr>
                            <tr> <td>1+2</td>             <td>(1*8)+0</td>             <td>2^8</td>         <td>2^9-1</td>      <td>00000001</td> <td>00000001</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>1+2</td>             <td>(1*8)+1</td>             <td>2^9</td>         <td>2^10-1</td>     <td>00000001</td> <td>0000001x</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>1+2</td>             <td>(1*8)+2</td>             <td>2^10</td>        <td>2^11-1</td>     <td>00000001</td> <td>000001xx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>1+2</td>             <td>(1*8)+3</td>             <td>2^11</td>        <td>2^12-1</td>     <td>00000001</td> <td>00001xxx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>1+2</td>             <td>(1*8)+4</td>             <td>2^12</td>        <td>2^13-1</td>     <td>00000001</td> <td>0001xxxx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>1+2</td>             <td>(1*8)+5</td>             <td>2^13</td>        <td>2^14-1</td>     <td>00000001</td> <td>001xxxxx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>1+2</td>             <td>(1*8)+6</td>             <td>2^14</td>        <td>2^15-1</td>     <td>00000001</td> <td>01xxxxxx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>1+2</td>             <td>(1*8)+7</td>             <td>2^15</td>        <td>2^16-1</td>     <td>00000001</td> <td>1xxxxxxx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>---</td>             <td>---</td>                 <td>---</td>         <td>---</td>        <td>---</td>      <td>---</td>      <td>---</td>             </tr>
                            <tr> <td>2+2</td>             <td>(2*8)+0</td>             <td>2^16</td>        <td>2^17-1</td>     <td>00000010</td> <td>00000001</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>2+2</td>             <td>(2*8)+1</td>             <td>2^17</td>        <td>2^18-1</td>     <td>00000010</td> <td>0000001x</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>2+2</td>             <td>(2*8)+2</td>             <td>2^18</td>        <td>2^19-1</td>     <td>00000010</td> <td>000001xx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>2+2</td>             <td>(2*8)+3</td>             <td>2^19</td>        <td>2^20-1</td>     <td>00000010</td> <td>00001xxx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>2+2</td>             <td>(2*8)+4</td>             <td>2^20</td>        <td>2^21-1</td>     <td>00000010</td> <td>0001xxxx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>2+2</td>             <td>(2*8)+5</td>             <td>2^21</td>        <td>2^22-1</td>     <td>00000010</td> <td>001xxxxx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>2+2</td>             <td>(2*8)+6</td>             <td>2^22</td>        <td>2^23-1</td>     <td>00000010</td> <td>01xxxxxx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>2+2</td>             <td>(2*8)+7</td>             <td>2^23</td>        <td>2^24-1</td>     <td>00000010</td> <td>1xxxxxxx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>...</td>             <td>...</td>                 <td>...</td>         <td>...</td>        <td>...</td>      <td>...</td>      <td>...</td>             </tr>
                            <tr> <td>255+2</td>           <td>(255*8)+0</td>           <td>2^2040</td>      <td>2^2041-1</td>   <td>11111111</td> <td>00000001</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>255+2</td>           <td>(255*8)+1</td>           <td>2^2041</td>      <td>2^2042-1</td>   <td>11111111</td> <td>0000001x</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>255+2</td>           <td>(255*8)+2</td>           <td>2^2042</td>      <td>2^2043-1</td>   <td>11111111</td> <td>000001xx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>255+2</td>           <td>(255*8)+3</td>           <td>2^2043</td>      <td>2^2044-1</td>   <td>11111111</td> <td>00001xxx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>255+2</td>           <td>(255*8)+4</td>           <td>2^2044</td>      <td>2^2045-1</td>   <td>11111111</td> <td>0001xxxx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>255+2</td>           <td>(255*8)+5</td>           <td>2^2045</td>      <td>2^2046-1</td>   <td>11111111</td> <td>001xxxxx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>255+2</td>           <td>(255*8)+6</td>           <td>2^2046</td>      <td>2^2047-1</td>   <td>11111111</td> <td>01xxxxxx</td> <td>xxxxxxxx</td>        </tr>
                            <tr> <td>255+2</td>           <td>(255*8)+7</td>           <td>2^2047</td>      <td>2^2048-1</td>   <td>11111111</td> <td>1xxxxxxx</td> <td>xxxxxxxx</td>        </tr>
                        </table>
                    </div>
                </figure>


                <h3>Comments</h3>


                <p>
                    This encoding scheme is mostly just big-endian with an 8-bit length prefix, but there's at least one difference.
                    Specifically: Most single-byte values are encoded by adding a trailing null byte, not an 8-bit length prefix.
                    That makes overlong encodings impossible, and it frees up one possible value from the length prefix.
                    We could use that extra value to encode larger numbers, but it's probably better if we can't encode values in the range [2^2048, 2^2056-1].
                    Since the extra value isn't otherwise useful, we simply allow 0x00 to be encoded as a single byte.
                </p> <p>
                    You could actually modify this encoding such that other values in the range [0x00, 0xFF] are encoded using a single byte.
                    If you encoded values in the range [0x00, 0x80] using a single byte, then latin text (and many text-based file formats) could be encoded more efficiently.
                    I believe that 2^1024-1 is the largest value that could be encoded, in that case.
                </p>


            </article>
        </main>
    </body>
</html>
